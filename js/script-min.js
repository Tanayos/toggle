$(document).ready(function(){var e='<style type="text/css">@import url(//courriermedias.courrierinternational.com/assets/list/toggle/css/toggleAsset.css);</style>',t='<script src="//courriermedias.courrierinternational.com/assets/list/toggle/js/toggleAsset.js"></script>',i=function(e,t){var i=$("<div>"+e+"</div>");return i.find(t).remove(),i.html()};$(".container").on("click",".add-submit",function(){var s=$(".add-title").val(),l=$(".add-intro").val(),d=$(".add-text").html();if(""!==s&&""!==d){if(""!==l)var a='<div class="toggle"><div class="toggle-delete"></div><div class="toggle-edit"></div><div class="toggle-visible"><div class="title">'+s+'</div><div class="intro">'+l+'</div></div><div class="toggle-hidden">'+d+"</div></div>";else var a='<div class="toggle"><div class="toggle-delete"></div><div class="toggle-edit"></div><div class="toggle-visible"><div class="title">'+s+'</div></div><div class="toggle-hidden">'+d+"</div></div>";$(a).appendTo(".asset-preview"),$(".asset-code").text(e+t+i(i($(".asset-preview").html(),".toggle-edit"),".toggle-delete")),$(".add-title, .add-intro").val(""),$(".add-text").html("")}}).on("click",".toggle-delete",function(){$(this).parent().remove(),$(".asset-code").text(e+t+i(i($(".asset-preview").html(),".toggle-edit"),".toggle-delete"))}).on("click",".toggle-edit",function(){var s=$(this).parent().find(".title").text();if($(this).parent().find(".intro"))var l=$(this).parent().find(".intro").text();else var l="";var d=$(this).parent().find(".toggle-hidden").html();$(".add-title").val(s),$(".add-intro").val(l),$(".add-text").html(d),$(this).parent().remove(),$(".asset-code").text(e+t+i(i($(".asset-preview").html(),".toggle-edit"),".toggle-delete"))}).on("click",".toggle-visible",function(){$(this).parent().toggleClass("active")});var s=new wysihtml.Editor("textarea",{toolbar:"toolbar",parserRules:wysihtmlParserRules,useLineBreaks:!1});$(".asset-preview").sortable({update:function(s,l){$(".toggle").removeAttr("style"),$(".asset-code").text(e+t+i($(".asset-preview").html(),".toggle-delete"))}})});